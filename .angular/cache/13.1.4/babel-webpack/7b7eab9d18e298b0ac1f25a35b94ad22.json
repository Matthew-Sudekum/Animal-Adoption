{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\beesn\\\\Desktop\\\\VSCode-Projects\\\\Animal-Adoption\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nexport class ApiServiceService {\n  constructor() {\n    this.items = [];\n  }\n\n  search(postalcode, distance) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield fetch('https://api.rescuegroups.org/v5/public/orgs/search', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/vnd.api+json',\n          'Authorization': 'yQf20ay8'\n        },\n        body: JSON.stringify({\n          data: {\n            'filterRadius': {\n              'postalcode': postalcode,\n              'miles': distance\n            }\n          }\n        })\n      });\n      const result = yield response.json();\n      _this.items = result.data;\n      console.log(_this.items);\n\n      _this.sortArray(_this.items);\n\n      console.log(_this.items);\n    })();\n  }\n\n  sortArray(array) {\n    let newArray = [];\n    let smallestItem = array[0];\n\n    do {\n      for (let i = 0; i < array.length; i++) {\n        if (array[i].attributes.distance == smallestItem.attributes.distance) {\n          console.log(\"yo\");\n          smallestItem = array[i];\n          newArray.push(smallestItem);\n          array.splice(array.indexOf(array[i]), 1);\n        }\n\n        if (i + 1 == array.length && array[i].attributes.distance != smallestItem.attributes.distance) ;\n      }\n    } while (array.length > 0);\n\n    if (array.length == 0) {\n      array = newArray;\n    }\n  }\n\n}\n\nApiServiceService.ɵfac = function ApiServiceService_Factory(t) {\n  return new (t || ApiServiceService)();\n};\n\nApiServiceService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ApiServiceService,\n  factory: ApiServiceService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/beesn/Desktop/VSCode-Projects/Animal-Adoption/src/app/api-service.service.ts"],"names":["i0","ApiServiceService","constructor","items","search","postalcode","distance","response","fetch","method","headers","body","JSON","stringify","data","result","json","console","log","sortArray","array","newArray","smallestItem","i","length","attributes","push","splice","indexOf","ɵfac","ApiServiceService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":";AAAA,OAAO,KAAKA,EAAZ,MAAoB,eAApB;AACA,OAAO,MAAMC,iBAAN,CAAwB;AAC3BC,EAAAA,WAAW,GAAG;AACV,SAAKC,KAAL,GAAa,EAAb;AACH;;AACKC,EAAAA,MAAM,CAACC,UAAD,EAAaC,QAAb,EAAuB;AAAA;;AAAA;AAC/B,YAAMC,QAAQ,SAASC,KAAK,CAAC,oDAAD,EAAuD;AAC/EC,QAAAA,MAAM,EAAE,MADuE;AAE/EC,QAAAA,OAAO,EAAE;AACL,0BAAgB,0BADX;AAEL,2BAAiB;AAFZ,SAFsE;AAM/EC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,UAAAA,IAAI,EAAE;AACF,4BAAgB;AACZ,4BAAcT,UADF;AAEZ,uBAASC;AAFG;AADd;AADW,SAAf;AANyE,OAAvD,CAA5B;AAeA,YAAMS,MAAM,SAASR,QAAQ,CAACS,IAAT,EAArB;AACA,MAAA,KAAI,CAACb,KAAL,GAAaY,MAAM,CAACD,IAApB;AACAG,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACf,KAAjB;;AACA,MAAA,KAAI,CAACgB,SAAL,CAAe,KAAI,CAAChB,KAApB;;AACAc,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAI,CAACf,KAAjB;AApB+B;AAqBlC;;AACDgB,EAAAA,SAAS,CAACC,KAAD,EAAQ;AACb,QAAIC,QAAQ,GAAG,EAAf;AACA,QAAIC,YAAY,GAAGF,KAAK,CAAC,CAAD,CAAxB;;AACA,OAAG;AACC,WAAK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,KAAK,CAACI,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,YAAIH,KAAK,CAACG,CAAD,CAAL,CAASE,UAAT,CAAoBnB,QAApB,IAAgCgB,YAAY,CAACG,UAAb,CAAwBnB,QAA5D,EAAsE;AAClEW,UAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACAI,UAAAA,YAAY,GAAGF,KAAK,CAACG,CAAD,CAApB;AACAF,UAAAA,QAAQ,CAACK,IAAT,CAAcJ,YAAd;AACAF,UAAAA,KAAK,CAACO,MAAN,CAAaP,KAAK,CAACQ,OAAN,CAAcR,KAAK,CAACG,CAAD,CAAnB,CAAb,EAAsC,CAAtC;AACH;;AACD,YAAIA,CAAC,GAAG,CAAJ,IAASH,KAAK,CAACI,MAAf,IAAyBJ,KAAK,CAACG,CAAD,CAAL,CAASE,UAAT,CAAoBnB,QAApB,IAAgCgB,YAAY,CAACG,UAAb,CAAwBnB,QAArF,EACI;AACP;AACJ,KAXD,QAWSc,KAAK,CAACI,MAAN,GAAe,CAXxB;;AAYA,QAAIJ,KAAK,CAACI,MAAN,IAAgB,CAApB,EAAuB;AACnBJ,MAAAA,KAAK,GAAGC,QAAR;AACH;AACJ;;AA5C0B;;AA8C/BpB,iBAAiB,CAAC4B,IAAlB,GAAyB,SAASC,yBAAT,CAAmCC,CAAnC,EAAsC;AAAE,SAAO,KAAKA,CAAC,IAAI9B,iBAAV,GAAP;AAAwC,CAAzG;;AACAA,iBAAiB,CAAC+B,KAAlB,GAA0B,aAAchC,EAAE,CAACiC,kBAAH,CAAsB;AAAEC,EAAAA,KAAK,EAAEjC,iBAAT;AAA4BkC,EAAAA,OAAO,EAAElC,iBAAiB,CAAC4B,IAAvD;AAA6DO,EAAAA,UAAU,EAAE;AAAzE,CAAtB,CAAxC","sourcesContent":["import * as i0 from \"@angular/core\";\r\nexport class ApiServiceService {\r\n    constructor() {\r\n        this.items = [];\r\n    }\r\n    async search(postalcode, distance) {\r\n        const response = await fetch('https://api.rescuegroups.org/v5/public/orgs/search', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/vnd.api+json',\r\n                'Authorization': 'yQf20ay8'\r\n            },\r\n            body: JSON.stringify({\r\n                data: {\r\n                    'filterRadius': {\r\n                        'postalcode': postalcode,\r\n                        'miles': distance\r\n                    }\r\n                }\r\n            })\r\n        });\r\n        const result = await response.json();\r\n        this.items = result.data;\r\n        console.log(this.items);\r\n        this.sortArray(this.items);\r\n        console.log(this.items);\r\n    }\r\n    sortArray(array) {\r\n        let newArray = [];\r\n        let smallestItem = array[0];\r\n        do {\r\n            for (let i = 0; i < array.length; i++) {\r\n                if (array[i].attributes.distance == smallestItem.attributes.distance) {\r\n                    console.log(\"yo\");\r\n                    smallestItem = array[i];\r\n                    newArray.push(smallestItem);\r\n                    array.splice(array.indexOf(array[i]), 1);\r\n                }\r\n                if (i + 1 == array.length && array[i].attributes.distance != smallestItem.attributes.distance)\r\n                    ;\r\n            }\r\n        } while (array.length > 0);\r\n        if (array.length == 0) {\r\n            array = newArray;\r\n        }\r\n    }\r\n}\r\nApiServiceService.ɵfac = function ApiServiceService_Factory(t) { return new (t || ApiServiceService)(); };\r\nApiServiceService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ApiServiceService, factory: ApiServiceService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}