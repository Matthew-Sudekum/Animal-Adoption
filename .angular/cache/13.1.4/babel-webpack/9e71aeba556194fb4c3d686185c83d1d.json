{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\beesn\\\\Desktop\\\\VSCode-Projects\\\\Animal-Adoption\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport * as i0 from \"@angular/core\";\nexport class ApiServiceService {\n  constructor() {\n    this.criteria = {\n      ageGroup: [],\n      coatLength: [],\n      gender: [],\n      sizeGroup: []\n    };\n    this.criteriaTemplate = {\n      ageGroup: [\"Baby\", \"Young\", \"Adult\", \"Senior\"],\n      coatLength: [\"Short\", \"Medium\", \"Long\"],\n      gender: [\"Male\", \"Female\"],\n      sizeGroup: [\"Small\", \"Medium\", \"Large\"]\n    };\n    this.items = [];\n    this.filters = [{\n      \"fieldName\": \"statuses.name\",\n      \"operation\": \"equals\",\n      \"criteria\": \"Available\"\n    }];\n    this.filterProcess = \"\";\n  }\n\n  searchOrgs(postalcode, distance, page) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield fetch('https://api.rescuegroups.org/v5/public/orgs/search/?limit=10&page=' + page + '&sort=orgs.distance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/vnd.api+json',\n          'Authorization': 'yQf20ay8'\n        },\n        body: JSON.stringify({\n          data: {\n            'filterRadius': {\n              'postalcode': postalcode,\n              'miles': distance\n            }\n          }\n        })\n      });\n      const result = yield response.json();\n\n      if (result.data != undefined) {\n        _this.items = result.data;\n      }\n\n      console.log(_this.items);\n    })();\n  }\n\n  searchAnimals(postalcode, distance, page) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield fetch('https://api.rescuegroups.org/v5/public/animals/search/?limit=10&page=' + page + '&sort=animals.distance', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/vnd.api+json',\n          'Authorization': 'yQf20ay8'\n        },\n        body: JSON.stringify({\n          data: {\n            'filterRadius': {\n              'postalcode': postalcode,\n              'miles': distance\n            },\n            'filters': _this2.filters,\n            \"filterProcessing\": _this2.filterProcess\n          }\n        })\n      });\n      const result = yield response.json();\n\n      if (result.data != undefined) {\n        _this2.items = result.data;\n      }\n\n      console.log(_this2.items);\n    })();\n  }\n\n  getFilterData(data) {\n    this.filterOptions = data;\n    this.applyFilters();\n  }\n\n  applyFilters() {\n    this.resetFilters();\n    let groupCount = 0;\n    let fieldCount = 1;\n\n    if (this.filterOptions.breed[0] == 1) {\n      this.filters.push({\n        \"fieldName\": \"species.singular\",\n        \"operation\": \"equals\",\n        \"criteria\": \"Dog\"\n      });\n      groupCount++;\n      fieldCount++;\n    } else if (this.filterOptions.breed[0] == 0) {}\n\n    if (this.filterOptions.breed[1] == 1) {\n      this.filters.push({\n        \"fieldName\": \"species.singular\",\n        \"operation\": \"equals\",\n        \"criteria\": \"Cat\"\n      });\n      groupCount++;\n      fieldCount++;\n    } else if (this.filterOptions.breed[1] == 0) {}\n\n    if (groupCount == 1) {\n      this.filterProcess += \" AND 2\";\n    } else if (groupCount == 2) {\n      this.filterProcess += \" AND (2 OR 3)\";\n    }\n\n    groupCount = 0;\n\n    for (let i = 0; i < this.filterOptions.ageGroup.length; i++) {\n      if (this.filterOptions.ageGroup[i] == 1) {\n        this.criteria.ageGroup.push(this.criteriaTemplate.ageGroup[i]);\n        groupCount++;\n      } else {}\n    }\n\n    if (groupCount != 4) {\n      this.filters.push({\n        \"fieldName\": \"animals.ageGroup\",\n        \"operation\": \"equals\",\n        // @ts-expect-error\n        \"criteria\": this.criteria.ageGroup\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    }\n\n    groupCount = 0;\n\n    for (let i = 0; i < this.filterOptions.coatLength.length; i++) {\n      if (this.filterOptions.coatLength[i] == 1) {\n        this.criteria.coatLength.push(this.criteriaTemplate.coatLength[i]);\n        groupCount++;\n      } else {}\n    }\n\n    if (groupCount != 3) {\n      this.filters.push({\n        \"fieldName\": \"animals.coatLength\",\n        \"operation\": \"equals\",\n        // @ts-expect-error\n        \"criteria\": this.criteria.coatLength\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    }\n\n    groupCount = 0;\n\n    for (let i = 0; i < this.filterOptions.gender.length; i++) {\n      if (this.filterOptions.gender[i] == 1) {\n        this.criteria.gender.push(this.criteriaTemplate.gender[i]);\n        groupCount++;\n      } else {}\n    }\n\n    if (groupCount != 2) {\n      this.filters.push({\n        \"fieldName\": \"animals.sex\",\n        \"operation\": \"equals\",\n        // @ts-expect-error\n        \"criteria\": this.criteria.gender\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    }\n\n    if (this.filterOptions.goodWith[0] == 1) {\n      this.filters.push({\n        \"fieldName\": \"animals.isKidsOk\",\n        \"operation\": \"equals\",\n        \"criteria\": \"true\"\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    } else if (this.filterOptions.goodWith[0] == 0) {}\n\n    if (this.filterOptions.goodWith[1] == 1) {\n      this.filters.push({\n        \"fieldName\": \"animals.isDogsOk\",\n        \"operation\": \"equals\",\n        \"criteria\": \"true\"\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    } else if (this.filterOptions.goodWith[1] == 0) {}\n\n    if (this.filterOptions.goodWith[2] == 1) {\n      this.filters.push({\n        \"fieldName\": \"animals.isCatsOk\",\n        \"operation\": \"equals\",\n        \"criteria\": \"true\"\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    } else if (this.filterOptions.goodWith[2] == 0) {}\n\n    groupCount = 0;\n\n    for (let i = 0; i < this.filterOptions.size.length; i++) {\n      if (this.filterOptions.size[i] == 1) {\n        this.criteria.sizeGroup.push(this.criteriaTemplate.sizeGroup[i]);\n        groupCount++;\n      } else {}\n    }\n\n    if (groupCount != 3) {\n      this.filters.push({\n        \"fieldName\": \"animals.sizeGroup\",\n        \"operation\": \"equals\",\n        // @ts-expect-error\n        \"criteria\": this.criteria.sizeGroup\n      });\n      fieldCount++;\n      this.filterProcess += \" AND \" + fieldCount;\n    }\n  }\n\n  resetFilters() {\n    this.criteria.ageGroup = [];\n    this.criteria.coatLength = [];\n    this.criteria.gender = [];\n    this.criteria.sizeGroup = [];\n    this.filters = [{\n      \"fieldName\": \"statuses.name\",\n      \"operation\": \"equals\",\n      \"criteria\": \"Available\"\n    }];\n    this.filterProcess = \"1\";\n  }\n\n}\n\nApiServiceService.ɵfac = function ApiServiceService_Factory(t) {\n  return new (t || ApiServiceService)();\n};\n\nApiServiceService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ApiServiceService,\n  factory: ApiServiceService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"sources":["C:/Users/beesn/Desktop/VSCode-Projects/Animal-Adoption/src/app/api-service.service.ts"],"names":["i0","ApiServiceService","constructor","criteria","ageGroup","coatLength","gender","sizeGroup","criteriaTemplate","items","filters","filterProcess","searchOrgs","postalcode","distance","page","response","fetch","method","headers","body","JSON","stringify","data","result","json","undefined","console","log","searchAnimals","getFilterData","filterOptions","applyFilters","resetFilters","groupCount","fieldCount","breed","push","i","length","goodWith","size","ɵfac","ApiServiceService_Factory","t","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nexport class ApiServiceService {\r\n    constructor() {\r\n        this.criteria = {\r\n            ageGroup: [],\r\n            coatLength: [],\r\n            gender: [],\r\n            sizeGroup: []\r\n        };\r\n        this.criteriaTemplate = {\r\n            ageGroup: [\"Baby\", \"Young\", \"Adult\", \"Senior\"],\r\n            coatLength: [\"Short\", \"Medium\", \"Long\"],\r\n            gender: [\"Male\", \"Female\"],\r\n            sizeGroup: [\"Small\", \"Medium\", \"Large\"]\r\n        };\r\n        this.items = [];\r\n        this.filters = [\r\n            {\r\n                \"fieldName\": \"statuses.name\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"Available\"\r\n            }\r\n        ];\r\n        this.filterProcess = \"\";\r\n    }\r\n    async searchOrgs(postalcode, distance, page) {\r\n        const response = await fetch('https://api.rescuegroups.org/v5/public/orgs/search/?limit=10&page=' + page + '&sort=orgs.distance', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/vnd.api+json',\r\n                'Authorization': 'yQf20ay8'\r\n            },\r\n            body: JSON.stringify({\r\n                data: {\r\n                    'filterRadius': {\r\n                        'postalcode': postalcode,\r\n                        'miles': distance\r\n                    }\r\n                }\r\n            })\r\n        });\r\n        const result = await response.json();\r\n        if (result.data != undefined) {\r\n            this.items = result.data;\r\n        }\r\n        console.log(this.items);\r\n    }\r\n    async searchAnimals(postalcode, distance, page) {\r\n        const response = await fetch('https://api.rescuegroups.org/v5/public/animals/search/?limit=10&page=' + page + '&sort=animals.distance', {\r\n            method: 'POST',\r\n            headers: {\r\n                'Content-Type': 'application/vnd.api+json',\r\n                'Authorization': 'yQf20ay8'\r\n            },\r\n            body: JSON.stringify({\r\n                data: {\r\n                    'filterRadius': {\r\n                        'postalcode': postalcode,\r\n                        'miles': distance\r\n                    },\r\n                    'filters': this.filters,\r\n                    \"filterProcessing\": this.filterProcess\r\n                }\r\n            })\r\n        });\r\n        const result = await response.json();\r\n        if (result.data != undefined) {\r\n            this.items = result.data;\r\n        }\r\n        console.log(this.items);\r\n    }\r\n    getFilterData(data) {\r\n        this.filterOptions = data;\r\n        this.applyFilters();\r\n    }\r\n    applyFilters() {\r\n        this.resetFilters();\r\n        let groupCount = 0;\r\n        let fieldCount = 1;\r\n        if (this.filterOptions.breed[0] == 1) {\r\n            this.filters.push({\r\n                \"fieldName\": \"species.singular\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"Dog\"\r\n            });\r\n            groupCount++;\r\n            fieldCount++;\r\n        }\r\n        else if (this.filterOptions.breed[0] == 0) { }\r\n        if (this.filterOptions.breed[1] == 1) {\r\n            this.filters.push({\r\n                \"fieldName\": \"species.singular\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"Cat\"\r\n            });\r\n            groupCount++;\r\n            fieldCount++;\r\n        }\r\n        else if (this.filterOptions.breed[1] == 0) { }\r\n        if (groupCount == 1) {\r\n            this.filterProcess += \" AND 2\";\r\n        }\r\n        else if (groupCount == 2) {\r\n            this.filterProcess += \" AND (2 OR 3)\";\r\n        }\r\n        groupCount = 0;\r\n        for (let i = 0; i < this.filterOptions.ageGroup.length; i++) {\r\n            if (this.filterOptions.ageGroup[i] == 1) {\r\n                this.criteria.ageGroup.push(this.criteriaTemplate.ageGroup[i]);\r\n                groupCount++;\r\n            }\r\n            else { }\r\n        }\r\n        if (groupCount != 4) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.ageGroup\",\r\n                \"operation\": \"equals\",\r\n                // @ts-expect-error\r\n                \"criteria\": this.criteria.ageGroup\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        groupCount = 0;\r\n        for (let i = 0; i < this.filterOptions.coatLength.length; i++) {\r\n            if (this.filterOptions.coatLength[i] == 1) {\r\n                this.criteria.coatLength.push(this.criteriaTemplate.coatLength[i]);\r\n                groupCount++;\r\n            }\r\n            else { }\r\n        }\r\n        if (groupCount != 3) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.coatLength\",\r\n                \"operation\": \"equals\",\r\n                // @ts-expect-error\r\n                \"criteria\": this.criteria.coatLength\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        groupCount = 0;\r\n        for (let i = 0; i < this.filterOptions.gender.length; i++) {\r\n            if (this.filterOptions.gender[i] == 1) {\r\n                this.criteria.gender.push(this.criteriaTemplate.gender[i]);\r\n                groupCount++;\r\n            }\r\n            else { }\r\n        }\r\n        if (groupCount != 2) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.sex\",\r\n                \"operation\": \"equals\",\r\n                // @ts-expect-error\r\n                \"criteria\": this.criteria.gender\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        if (this.filterOptions.goodWith[0] == 1) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.isKidsOk\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"true\"\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        else if (this.filterOptions.goodWith[0] == 0) { }\r\n        if (this.filterOptions.goodWith[1] == 1) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.isDogsOk\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"true\"\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        else if (this.filterOptions.goodWith[1] == 0) { }\r\n        if (this.filterOptions.goodWith[2] == 1) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.isCatsOk\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"true\"\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n        else if (this.filterOptions.goodWith[2] == 0) { }\r\n        groupCount = 0;\r\n        for (let i = 0; i < this.filterOptions.size.length; i++) {\r\n            if (this.filterOptions.size[i] == 1) {\r\n                this.criteria.sizeGroup.push(this.criteriaTemplate.sizeGroup[i]);\r\n                groupCount++;\r\n            }\r\n            else { }\r\n        }\r\n        if (groupCount != 3) {\r\n            this.filters.push({\r\n                \"fieldName\": \"animals.sizeGroup\",\r\n                \"operation\": \"equals\",\r\n                // @ts-expect-error\r\n                \"criteria\": this.criteria.sizeGroup\r\n            });\r\n            fieldCount++;\r\n            this.filterProcess += \" AND \" + fieldCount;\r\n        }\r\n    }\r\n    resetFilters() {\r\n        this.criteria.ageGroup = [];\r\n        this.criteria.coatLength = [];\r\n        this.criteria.gender = [];\r\n        this.criteria.sizeGroup = [];\r\n        this.filters = [\r\n            {\r\n                \"fieldName\": \"statuses.name\",\r\n                \"operation\": \"equals\",\r\n                \"criteria\": \"Available\"\r\n            }\r\n        ];\r\n        this.filterProcess = \"1\";\r\n    }\r\n}\r\nApiServiceService.ɵfac = function ApiServiceService_Factory(t) { return new (t || ApiServiceService)(); };\r\nApiServiceService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ApiServiceService, factory: ApiServiceService.ɵfac, providedIn: 'root' });\r\n"]},"metadata":{},"sourceType":"module"}